clear
clc

dBm2Watt = inline('1e-3*10.^(P/10)');
addpath fibras/ -end

%% Dados do bombeio
bombeio.lambda = [1425 1440 1450 1453 1465];
bombeio.N_Bombeios = length(bombeio.lambda);
bombeio.P = [0.3000 0.3000 0.3000 0.2000 0.4200];
bombeio.Bwp = 0.2000;
bombeio.FPL = 2;

%% Dados do sinal
sinal.lambda = [1528.778174,1530.338948,1531.902913,1533.470077,1535.040451,...
    1536.614044,1538.190867,1539.770930,1541.354242,1542.940813,1544.530654,...
    1546.123775,1547.720186,1549.319897,1550.922918,1552.529259,1554.138932,...
    1555.751946,1557.368312,1558.988040,1560.611140,1562.237624,1563.867501,...
    1565.500783,1567.137480,1568.777603,1570.421163,1572.068170,1573.718635,...
    1575.372570,1577.029984,1578.690890,1580.355298,1582.023219,1583.694665,...
    1585.369646,1587.048174,1588.730260,1590.415915,1592.105151,1593.797980,...
    1595.494412,1597.194459,1598.898133,1600.605446,1602.316408,1604.031033,...
    1605.749330,1607.471314,1609.196994,1610.926384,1612.659494];

sinal.N_Sinais = length(sinal.lambda);
sinal.Bws = 1;
sinal.P = dBm2Watt(-10);

%% Dados da fibra
fibra = SMF(bombeio,sinal);
fibra.L = 20e3;

[resultados_num,resultados_an] = DRA_Numerico(bombeio, sinal, fibra)
